{% extends "base.html" %}
{% block title %}Bot FAQs{% endblock %}
{% block page_title %}PlacementBot FAQ Manager{% endblock %}
{% block content %}
<div class="row g-4">
    <div class="col-lg-4">
        <div class="pp-card">
            <h6 class="mb-3 gradient-text" style="font-weight:700;"><i class="bi bi-plus-circle me-2"></i>Add New FAQ
            </h6>
            <form method="POST">
                <input type="hidden" name="action" value="add" />
                <div class="mb-3"><label class="pp-label">Question</label>
                    <input type="text" name="question" class="pp-input" placeholder="What is the min CGPA?" required />
                </div>
                <div class="mb-3"><label class="pp-label">Answer</label>
                    <textarea name="answer" class="pp-textarea" rows="4" placeholder="Bot response..."
                        required></textarea>
                </div>
                <div class="mb-3"><label class="pp-label">Keywords (comma-separated)</label>
                    <input type="text" name="keywords" class="pp-input" placeholder="cgpa,cutoff,minimum" />
                    <p class="note mt-1">Used for keyword matching queries.</p>
                </div>
                <button type="submit" class="btn-pp-primary w-100"><i class="bi bi-plus me-2"></i>Add FAQ</button>
            </form>
        </div>
    </div>
    <div class="col-lg-8">
        <div class="pp-card">
            <h6 class="mb-3"
                style="color:var(--text-muted);font-size:.8rem;text-transform:uppercase;letter-spacing:.08em;">All FAQs
                ({{ faqs|length }})</h6>
            {% if faqs %}
            <div class="d-flex flex-column gap-3">
                {% for f in faqs %}
                <div
                    style="background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius-sm);padding:16px;">
                    <div class="d-flex justify-content-between align-items-start mb-2">
                        <strong style="font-size:.88rem;color:var(--primary-light);"><i
                                class="bi bi-question-circle me-1"></i>{{ f.question }}</strong>
                        <form method="POST" style="display:inline;">
                            <input type="hidden" name="action" value="delete" />
                            <input type="hidden" name="faq_id" value="{{ f.id }}" />
                            <button class="btn-pp-danger" type="submit" onclick="return confirm('Delete?')"><i
                                    class="bi bi-trash"></i></button>
                        </form>
                    </div>
                    <form method="POST" class="d-flex gap-2 align-items-start">
                        <input type="hidden" name="action" value="update" />
                        <input type="hidden" name="faq_id" value="{{ f.id }}" />
                        <textarea name="answer" class="pp-textarea" rows="2"
                            style="flex:1;font-size:.83rem;">{{ f.answer }}</textarea>
                        <button type="submit" class="btn-pp-success" style="white-space:nowrap;"><i
                                class="bi bi-check2"></i> Save</button>
                    </form>
                    {% if f.keywords %}<div class="mt-2 note"><i class="bi bi-tags me-1"></i>{{ f.keywords }}</div>{%
                    endif %}
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-5"><i class="bi bi-chat-dots"
                    style="font-size:3rem;color:var(--text-muted);"></i>
                <p class="note mt-2">No FAQs yet.</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}